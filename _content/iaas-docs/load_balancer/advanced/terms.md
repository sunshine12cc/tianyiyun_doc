---
---

# 负载均衡器术语解释

## 均衡方式

**轮询**：依据后端服务器的权重，将请求轮流发送给后端服务器，常用于短连接服务，例如 HTTP 等服务。

**最少连接**：优先将请求发给拥有最少连接数的后端服务器，常用于长连接服务，例如数据库连接等服务。

**源地址**：将请求的源地址进行hash运算，并结合后端的服务器的权重派发请求至某匹配的服务器，这可以使得同一个客户端IP的请求始终被派发至某特定的服务器。该方式适合负载均衡无cookie功能的TCP协议。

## 会话保持

会话保持可以将来自同一个客户端的请求始终发给同一个后端服务器，是通过 cookie 的方式来实现的。

**植入cookie**：由负载均衡器向客户端植入 cookie，这时你需要指定 cookie 的过期时间，不指定默认为不过期。

**改写cookie**：cookie 由你的后端业务来植入和管理，负载均衡器会通过改写该 cookie 的值来实现会话保持， 改写 cookie 对后端服务是透明的，不会影响后端服务的正常运行；这时你需要指定需要改写的 cookie 名称。

## 健康检查

开启健康检测后，负载均衡器会根据你的配置定期检查后端服务的运行状态， 当某个后端服务出现异常时，会自动隔离该后端服务，并将请求转发给其他健康的后端服务，实现高可用性。

**健康检查方式**：

**TCP**：通过向后端服务器发送 TCP 包来检测后端服务

**HTTP**：通过向后端服务器发送 HTTP 请求来检测后端服务，你可以指定需要检测的 URI。负载均衡器会通过 HTTP 返回值是否为200来判断服务是否正常

**ICMP**：通过向后端服务器发送 ICMP Echo Request 请求（即 ping）来检查后端网络是否可达。

**UDP**：UDP 方式会 **结合** ICMP Echo Request 和 UDP port probe 两种方式来检查。

```
* ICMP Echo Request: 参考上述 ICMP 方式。
* UDP port probe: 发送一些UDP包。如果后端响应ICMP Destination Port Unreachable的包，则认为后端UDP端口没被监听；没有收到回包，认为端口是被监听着的。

>注解：
对于监听器为 UDP 端口组，且健康检查为 UDP 时，健康检查只会检测端口组的第一个端口。

>注解：
当使用UDP的健康检查方式时，要保证后端能够正确响应ICMP Echo Request（即返回ICMP Echo Reply包，icmp code: 0/0），并且能返回ICMP Destination Port Unreachable包，icmp code: 3/3）。
如果后端有加载防火墙或者有其它防火墙策略，要保证其上行中相应的策略是放行的。
```

**健康检查选项**：

**检查间隔**：连续两次健康检查之间的时间间隔，单位为秒，范围为 `2 - 60s`

**超时时间**：等待健康检查请求返回的超时时间，检查超时将会被判定为一次检查失败，单位为秒，范围为 `5 - 300s`

**不健康阈值**：多少次连续检查失败之后，可以将后端服务屏蔽，范围为 `2 - 10次`

**健康阈值**：多少次连续检查成功之后，可以将后端服务恢复，范围为 `2 - 10次`

## 后端服务器权重

当均衡方式为 “轮询” 时，你可以通过设置后端服务器的权重来让负载均衡器进行权重转发。 权重的范围为 `1 - 100`，数值越大权重越高。

## 后端服务器状态**

**活跃**：健康检查正常

**不可用**：健康检查失败

**异常**：处于健康和不健康的中间转换状态，一般持续时间很短，与你配置的 “健康检查选项” 相关

## 附加 HTTP 头字段

当监听协议为 HTTP/HTTPS 时，负载均衡器在转发 HTTP 请求时可以附加用户指定的 HTTP 头字段，后端服务器可以通过解析相应的头字段来获取字段内容。目前支持的附加头字段有：

**客户端真实IP**: 对应的HTTP 的头字段为 **X-Forwarded-For**。

**负载均衡器ID**: 对应的HTTP 的头字段为 **QC-LB-ID**。

**负载均衡器入口IP**: 对应的HTTP 的头字段为 **QC-LB-IP**。

**负载均衡器监听协议**: 对应的HTTP 的头字段为 **X-Forwarded-Proto**。

## 超时时间

当客户端与负载均衡器的连接长期处于非活跃状态时，会被判断为连接超时，该连接会被主动中断。超时时间单位为秒，范围是 `10 - 86400s`，默认值是 `50s`。 如果你的连接都是长连接，那么你可能需要调整该配置。

## 附加选项**

**取消URL校验**: (仅HTTP/HTTPS)可以让负载均衡器接受不符合编码规范的 URL，例如包含未编码中文字符的 URL 等。

**获取客户端IP**: 也称为“透明代理”，可以把客户端的IP通过直接传递给后端。开启本功能后，负载均衡器对与后端是完全透明的。后端主机 TCP 连接得到的源地址是客户端的IP，而不是负载均衡器的IP。

注解

只有在负载均衡器要提供面向公网的服务时，才开启透明代理功能。如果是私网的负载均衡器，开启透明代理可能会导致客户端无法通过负载均衡器与服务端建立连接。

**数据压缩**:（仅HTTP/HTTPS）使用 gzip 算法压缩文本数据，以减少网络流量 。

**启用 HTTPS 重定向**: (仅HTTP) 将此监听器的 HTTP 请求重定向至此负载均衡器的 HTTPS 监听器。注：启用后，此监听器不支持添加后端。

**当所有后端不可用时直接拒绝 TCP 连接请求**: (仅TCP) 当所有后端不可用时，不再接受连接，而是直接拒绝 TCP 连接请求。

**禁用 HTTP 头字段 Proxy**: (仅HTTP/HTTPS) 为了安全起见，某些后端为 CGI 的 Web 应用需要在用户请求中禁用该字段来防止注入攻击。

## 加密选项

**启用全部加密方式**:（仅HTTPS）

**禁用不安全的加密方式**:（仅HTTPS）禁用存在安全隐患的加密方式， 可能会不兼容低版本的客户端。

**启用兼容 IE 的加密方式**:（仅HTTPS）AES128 + EECDH : AES128 + EDH no-tls-tickets no-sslv3。

## 集群模式

仅 Region 区域支持该属性。

**低延时**: 网络流量会优先转发到距离网关最近的负载均衡器节点，缩短网络传输距离，降低延时。

**高吞吐**: 网络流量会均衡地转发到所有的负载均衡器节点，充分利用所有节点的能力，提高吞吐率。